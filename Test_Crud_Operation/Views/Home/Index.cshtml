@model List<Test_Crud_Operation.Models.ViewModel.ReportViewModel>

@{
    var months = new List<string>
    {
        "January", "February", "March", "April", "May", "June", "July", "August", "September", "October", "November", "December"
    };

    var groupedData = Model.GroupBy(x => x.DimensionOne).Select(g => new
    {
        department = g.Key,
        quantities = months.Select(month => g.Where(x => x.Month == month).Sum(x => x.Quantity)).ToList()
    }).ToList();

    var XLabels = Newtonsoft.Json.JsonConvert.SerializeObject(months);
    var DataSets = Newtonsoft.Json.JsonConvert.SerializeObject(groupedData.Select(g => new
    {
        label = g.department,
        data = g.quantities,
        backgroundColor = "rgba(54, 162, 235, 0.2)",
        borderColor = "rgba(54, 162, 235, 1)",
        borderWidth = 1
    }).ToList());

    ViewData["Title"] = "Employees Joined in 2023";
}

<!DOCTYPE html>
<html>
<head>
    <meta name="viewport" content="width=device-width" />
    <title>@ViewData["Title"]</title>
</head>
<body>
    <div class="box-body">
        <div class="chart-container">
            <canvas id="chart" style="width:100%; height:500px"></canvas>
        </div>
    </div>
</body>
</html>

<script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.7.2/Chart.bundle.min.js"></script>
<script src="https://code.jquery.com/jquery-3.3.1.min.js"></script>

<script type="text/javascript">
    $(function () {
        var ctx = document.getElementById("chart").getContext('2d');

        var data = {
            labels: @Html.Raw(XLabels),
            datasets: @Html.Raw(DataSets)
            };

        var options = {
            maintainAspectRatio: false,
            scales: {
                yAxes: [{
                    ticks: {
                        min: 0,
                        beginAtZero: true
                    },
                    gridLines: {
                        display: true,
                        color: "rgba(255,99,164,0.2)"
                    }
                }],
                xAxes: [{
                    gridLines: {
                        display: false
                    }
                }]
            }
        };

        var myChart = new Chart(ctx, {
            type: 'bar',
            data: data,
            options: options
        });
    });
</script>
